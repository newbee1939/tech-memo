# 参考資料

- [x] 開発効率向上も、フレキシブルな働き方も、セキュリティの確保も、GitHub Codespaces で実現！-ストレスフリーな開発体験のカギ-
  - https://techplay.jp/video/273
- [] GitHub Codespaces の公式資料
  - https://docs.github.com/ja/codespaces
- [] Dev Container
  - https://code.visualstudio.com/docs/devcontainers/containers
- [] Dev Container を使ってステップバイステップで作る Python アプリケーション開発環境
  - https://tech.isid.co.jp/entry/2023/05/02/Dev_Container%E3%82%92%E4%BD%BF%E3%81%A3%E3%81%A6%E3%82%B9%E3%83%86%E3%83%83%E3%83%97%E3%83%90%E3%82%A4%E3%82%B9%E3%83%86%E3%83%83%E3%83%97%E3%81%A7%E4%BD%9C%E3%82%8BPython%E3%82%A2%E3%83%97%E3%83%AA%E3%82%B1

# メモ

- Dev Container, Codespaces, VSCode の Dev Container について
  - GitHub Codespaces とは
    - クラウドでホストされている開発環境
    - 構成ファイルをリポジトリにコミットすることで、GitHub Codespaces のプロジェクトをカスタマイズできます
    - GitHub Codespaces のカスタマイズ
      - codespace のランタイムとツールをカスタマイズするには、リポジトリ用に 1 つ以上の dev container 構成を作成できます
      - dev container 構成をリポジトリに追加すると、ユーザーがリポジトリで実行する作業に適したさまざまな開発環境の選択肢を定義できます
      - 開発コンテナーを構成せずに、リポジトリから codespace を作成する場合、GitHub Codespaces によって、多くのツール、言語、ランタイム環境が含まれる既定の codespace イメージを含む環境に、リポジトリがクローンされます
      - テンプレートから codespace を作成する場合は、既定のイメージの上のいくつかの初期構成から開始できます
  - Dev Container とは
  - VSCode の Dev Container とは
  - GitHub Codespaces 上に構築する Dev Container と VSCode の Dev Container の違いは？
  - 最新の開発環境事情について調べる
  - 現在の開発環境のデメリットについて
  - Codespaces とか Dev Container を入れるメリットについて
  - Codespaces とか Dev Container を入れるデメリットについて
    - 料金とかは？
- GitHub Codespaces を使った開発環境のメリット
- Dev Container を使った環境統一
- この開発環境は十分に快適ですか？
  - 環境の多様化。うまくいく人といかない人がいる
  - 開発環境構築のコスト増加
    - オンボーディングのために時間などを合わせて出社
    - 設定完了後のトラブル
      - 手順書があってもうまく実施できない
- こういう開発環境が欲しい
  - 誰が起動しても同じ環境が保証されている
  - 故障が発生しない。しても新しい環境がすぐに手に入る
- そこで、GitHub Codespaces
  - クラウド上の仮想マシンに開発環境を構築してブラウザなどからアクセスして開発を行うことを可能にする GitHub のサービス
  - 開発用の計算機を用意することなく開発を行うことを可能にする
  - VSCode がブラウザで起動するようなもの
- GitHub Codespaces はクラウド上に環境が構築される
  - 故障時も新しい環境構築は簡単
  - そもそも壊れる可能性は低い（GitHub がダウンしたら使えなくなる）
- Dev Container を導入すると開発環境がコンテナで統一される
  - 誰が起動しても同一の環境になる
  - PC -> https -> GitHub Codespaces(dev container 環境)
- GitHub Codespaces の仕組み
  - GitHub のインフラ（Azure）上の仮想マシンで動作しているコンテナにアクセスする形になっている
    - コンテナ内部では vscode-server などが起動
    - 起動するコンテナのカスタマイズも可能
    - 開発に利用するミドルウェア(postgresql など)もコンテナとして起動することが可能
- VSCode からも利用することができる
  - GitHub Codespaces 拡張機能(GitHub Codespaces)のインストールが必要
  - リモートエクスプローラに GitHub Codespaces 用のメニューが追加される
    - connect できる。GitHub の Codespaces に接続可能
  - GitHub Codespaces の作成、削除、接続がここから実施できる
- GitHub Codespaces の便利なところ
  - GitHub にアクセス可能な環境であれば開発環境を利用できる
  - GitHub との親和性が高い
    - 起動した時点で開発向けの設定が行われている
      - ソースコードの clone が実施されている
      - GitHub へのアクセス設定が行われている
    - ブランチなどを指定して環境を構築できる
      - 特定の Pull Request のデバッグなどをするときに都度環境を構築する必要がない
  - 同じ開発環境を全メンバーが確実に構築可能に
  - AWS などのアクセスに使う機密情報なども GitHub Codespaces で隠蔽することができた
  - VSCode の拡張とかもいい感じにメンバー間で共通化できる
- GitHub Codespaces の課金形態
  - コンピューティング時間、ストレージ容量の課金の 2 種類がある
    - コンピューティング時間は GitHub Codespaces を起動している間発生
    - ストレージは GitHub Codespaces の VM が使用するストレージの容量に応じて発生
  - 注意
    - ストレージ利用料は起動していない間も料金が発生する
- Codespaces にはテンプレートもある
  - https://github.com/codespaces
  - Blank という Codespaces のテンプレートがある
    - ブランクと言いつつ、いろいろなツールがすでに入っている
      - python --version
- Dev Container による開発環境の統一
  - Dev Container
    - 開発環境統一のキモとなる機能
      - VSCode に搭載されているコンテナを開発環境として利用するための機能
        - 公式ドキュメント
          - https://code.visualstudio.com/docs/devcontainers/containers
- Dev Container で何が嬉しい？
  - GitHub Codespaces の導入で自宅などのアクセス環境に依存しない開発環境が手に入った
  - GitHub Codespaces 上に構築する開発環境も Dev Container を使って全員が統一された環境にできる
    - 構築に手間がかかる環境だとしても Dockerfile に閉じ込めてしまえる
- Dev Container の始め方
  - プロジェクトに設定ファイルを作成する
    - devcontainer/devcontainer.json というファイルを作成
    - GUI も可能
      - VSCode の右下
      - add devcontainer configuration file
    - GitHub の画面から設定することも可能
      - 「Configure dev container」
        - 最近追加された？
- feature 機能について
  - feature と呼ばれるコンテナに機能を追加する機能がある
    - dev container 導入時の GUI で追加
    - devcontainer.json に直接記述して追加
- template 機能
  - よくある構成の Dev Container 環境を構成する機能
    - GUI のメニューで template を選択して利用する
    - 例えば、postgres と特定のフレームワークや言語といった組み合わせの template がある
- 開発するときに毎回 build が走るのはしんどい
  - codespaces にはこれを解消する機能がある
  - プレビルド機能
  - プレビルドは、GitHub Actions に事前に build させることもできる
    - 初回の待ちも無くせる
- 感想
  - Codespaces や Dev Container は確かに便利だし、「環境構築自体が不要」なのは確かに革命なんだけど、GitHub に障害が起きた場合に開発できなくなるのは結構辛い気がする
  - 基本は Codespaces に統一しておいて、一応ローカル PC でも開発できるようにしておくのが良いのかも。
  - 後は料金だな
- TODO
  - dev container, codespaces, vscode の dev container のそれぞれが何を表しているかを調べて理解する
  - 他の人のトレースではなく、私が考える最強の開発環境を提唱する。
